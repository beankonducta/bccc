<html>

<head>
  <link rel="stylesheet" href="players.css">
  <link rel="stylesheet" href="https://use.typekit.net/vlj7tzj.css">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>Blue Copper Chess Club</title>
  <link rel="icon" type="image/x-icon" href="Images/favicon.png">
  <meta property="og:image" content="Images/social.png">
  <meta property="og:image:type" content="image/png">
  <!-- add axios -->
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</head>

<body>

  <script>
    // Direct api calls to chess.com and lichess to pull live MMR data (or whatever else we want)
    // TODO: add user array and iterate thru

      // LICHESS API CALL
      function lichessCall(user) {
        fetch(`https://lichess.org/api/user/${user}`)
          .then((r) => r.json())
          .then((data) => {
            // sets our <td> with id caboyd to classical rating on Lichess
            // changing the 'perf' to bullet etc will pull from other game types
            // or we could average across all or something
            document.getElementById(user).innerHTML = data.perfs.classical.rating;
          })
          .catch((e) =>  document.getElementById(user).innerHTML = "NO DATA");
      }

      // CHESS.COM API CALL
      // USER must also be the ID of the <td> you want to update
      function chessDotComCall(user) {
        fetch(`https://api.chess.com/pub/player/${user}/stats`)
          .then((r) => r.json())
          .then((data) => {
            // sets our <td> with provided id to chess_rapid rating on Chess.com
            // could specify a different game type or do some averaging
            document.getElementById(user).innerHTML = data.chess_rapid.last.rating;
          })
          .catch((e) => document.getElementById(user).innerHTML = "NO DATA");
      }
    window.addEventListener('load', () => {
      chessDotComCall("bnkndcta"); // test
      lichessCall("caboyd"); // test
    });
  </script>

  <div class="nav">

    <ul class="nav">
      <img src="Images/webheader.png" width=100%>
      <li><a href="index.html">Information</a></li>
      <li><a href="players.html">Players</a></li>
    </ul>
    <div class="mobile">
      <h2> B.C. Chess Club
        <span class="active">will</span>
        <span class="inactive"> will not</span>
        meet this week (May 19):
      </h2>
      <p> 8 A.M. \ <a href="https://www.bluecopperslc.com/" target="_blank">Blue Copper 2000</a> \ 401 N 300 W </p>
    </div>
  </div>
  </div>

  <div class="content">

    <div class="first-column">
      <h1> Active Players:</h1>
      <p> Ratings are internal and based on in-club games. Calculations by <a
          href="http://www.qa76.net/elo">qa76.net</a>. Records display W/L/D. </p>
      <div class="table">
        <table>
          <tr>
            <th>Player</th>
            <th>Rating [IRL]</th>
            <th>Rating [WEB]</th>
            <th>Record</th>
            <th>Profile</th>
          </tr>
          <tr>
            <td>Carter B.</td>
            <td>1294</td>
            <td id="caboyd">Loading..</td>
            <td>8/2/0</td>
            <td><a href="https://lichess.org/@/caboyd"> Lichess</a></td>
          </tr>
          <tr>
            <td>Jackson G.</td>
            <td>1251</td>
            <td id="grassleaf">Loading..</td>
            <td>5/2/0</td>
            <td><a href="https://lichess.org/@/grassleaf">Lichess</a> \ <a
                href="https://www.chess.com/member/jacksongraessle"> Chess.com </a></td>
          </tr>
          <tr>
            <td>Eric C.</td>
            <td>1221</td>
            <!-- no online profile  -->
            <td id="ericc">NO DATA</td>
            <td>3/2/0</td>
            <td>N/A</td>
          </tr>
          <tr>
            <td>Drew V.</td>
            <td>1199</td>
            <!-- no online profile  -->
            <td id="drewv">NO DATA</td>
            <td>1/1/0</td>
            <td>N/A</td>
          </tr>
          <tr>
            <td>Tyler D.</td>
            <td>1194</td>
            <!-- no online profile  -->
            <td id="tylerd">NO DATA</td>
            <td>3/4/0</td>
            <td>N/A</td>
          </tr>
          <tr>
            <td>Siena D.</td>
            <td>1182</td>
            <!-- no online profile  -->
            <td id="sienad">NO DATA</td>
            <td>0/1/0</td>
            <td>N/A</td>
          </tr>
          <tr>
            <td>Matt M.</td>
            <td>1164</td>
            <!-- no online profile  -->
            <td id="mattm">NO DATA</td>
            <td>1/3/0</td>
            <td>N/A</td>
          </tr>

          <tr>
            <td>Patrick A.</td>
            <td>1162</td>
            <!-- no online profile  -->
            <td id="bnkndcta">NO DATA</td>
            <td>0/2/0</td>
            <td><a href="https://www.chess.com/member/bnkndcta"> Chess.com </a></td>
          </tr>

          <tr>
            <td>Harrison P.</td>
            <td>1161</td>
            <td>0/4/0</td>
            <td>N/A</td>
          </tr>
        </table>
      </div>
    </div>

    <div class="second-column">
      <h1>Join Us:</h1>
      <h2> B.C. Chess Club </br>
        <span class="active">will</span> &nbsp;&nbsp;
        <span class="inactive"> will not </span></br>
        meet this week (May 12)
      </h2>
      <p>Thursday Mornings, 8 A.M.</br>
        <a href="https://www.bluecopperslc.com/" target="_blank">Blue Copper 2000 </a>
        </br>401 N 300 W
        </br> SLC, UT
      </p>
    </div>

</body>

</html>